<!DOCTYPE html>
<html>
<head>
  <title>Datos de Red y Ubicación</title>
</head>
<body>
  <h2>Obteniendo datos...</h2>

  <p id="ipPublica"></p>
  <p id="gps"></p>
  <p id="mapa"></p>

  <script>
    async function obtenerIPPublica() {
      try {
        let respuesta = await fetch("https://api.ipify.org?format=json");
        let datos = await respuesta.json();
        document.getElementById("ipPublica").innerHTML = "IP Pública: " + datos.ip;
      } catch (e) {
        document.getElementById("ipPublica").innerHTML = "Error obteniendo IP pública";
      }
    }

    function obtenerGPS() {
      if (!navigator.geolocation) {
        document.getElementById("gps").innerHTML = "GPS no soportado";
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;

          document.getElementById("gps").innerHTML =
            "Latitud: " + lat + "<br>Longitud: " + lon;

          document.getElementById("mapa").innerHTML =
            `<a href="https://www.google.com/maps?q=${lat},${lon}" target="_blank">
              Ver ubicación en Google Maps
            </a>`;
        },
        (err) => {
          document.getElementById("gps").innerHTML =
            "Error GPS: " + err.message;
        }
      );
    }

    obtenerIPPublica();
    obtenerGPS();
  </script>
</body>
</html>
