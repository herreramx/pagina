<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Datos del dispositivo</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .item {
            margin-bottom: 12px;
        }
        #mapLink {
            font-size: 18px;
            font-weight: bold;
            color: blue;
        }
    </style>
</head>
<body>

    <h2>Obteniendo datos...</h2>

    <div class="item"><b>IP Pública:</b> <span id="publicIP"></span></div>
    <div class="item"><b>Dispositivo:</b> <span id="device"></span></div>
    <div class="item"><b>Coordenadas:</b> <span id="coords"></span></div>
    <div class="item"><a id="mapLink" href="#" target="_blank"></a></div>

<script>
/* ==========================
   Obtener Modelo del Dispositivo
   ========================== */
function getDeviceModel() {
    const ua = navigator.userAgent;

    // iPhone detección
    if (/iPhone/.test(ua)) {
        if (window.screen.height === 812 && window.devicePixelRatio === 3) return "iPhone X / XS";
        if (window.screen.height === 844) return "iPhone 12 / 13";
        if (window.screen.height === 926) return "iPhone 12 Pro Max / 13 Pro Max";
        return "iPhone (modelo no exacto)";
    }

    // Android detección
    if (/Android/.test(ua)) {
        const model = ua.match(/Android.*?;\s*(.*?)\s*Build/);
        return model ? model[1] : "Android (modelo no identificado)";
    }

    // Otros dispositivos
    return ua;
}

document.getElementById("device").textContent = getDeviceModel();


/* ==========================
   Obtener IP Pública
   ========================== */
fetch("https://api.ipify.org?format=json")
    .then(res => res.json())
    .then(data => {
        document.getElementById("publicIP").textContent = data.ip;
    })
    .catch(err => {
        document.getElementById("publicIP").textContent = "Error obteniendo IP";
    });


/* ==========================
   Obtener Coordenadas GPS
   ========================== */
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
        (pos) => {
            const lat = pos.coords.latitude.toFixed(6);
            const lon = pos.coords.longitude.toFixed(6);

            document.getElementById("coords").textContent = `${lat}, ${lon}`;

            // Crear enlace directo para Google Maps
            const mapUrl = `https://www.google.com/maps?q=${lat},${lon}`;
            const mapLink = document.getElementById("mapLink");
            mapLink.href = mapUrl;
            mapLink.textContent = "Ver ubicación en Google Maps";
        },
        (err) => {
            document.getElementById("coords").textContent = "Error GPS: " + err.message;
        },
        {
            enableHighAccuracy: true,
            timeout: 8000,
            maximumAge: 0
        }
    );
} else {
    document.getElementById("coords").textContent = "Geolocalización no soportada";
}

</script>

</body>
</html>
